<%= simple_form_for @internal_order, remote: true, html: {class: "form-inline"} do |f| %>
  <%= f.error_notification %>
  <%= f.input :applicant_id,
                    label: 'Solicitante',
                    label_method: :name_and_sector,
                    value_method: :id,
                    collection: @applicants,
                    include_blank: false,
                    input_html: { class: 'chosen-select', id: 'responsable_id' },
                    prompt: 'Seleccione un usuario'
  %>
  <%= f.input :provider, as: :string, label: 'Abastecedor',
              input_html: {
                value: "#{if @internal_order.new_record?; current_user.name_and_sector; else; @internal_order.provider.name_and_sector; end}",
                size: 33
              }, disabled: true %>
  <%= f.hidden_field :provider_id, id: "provider_id", value: "#{if @internal_order.new_record?; current_user.id; else; @internal_order.provider.id; end}"  %>

    <%= f.input :observation, label: 'Observaciones', as: :text,
        :input_html => { :cols => 27  , :rows => 1 } %>

  <br><br>

  <!-- Insumos solicitados -->
  <table class="table table-hover">
    <thead>
      <tr>
        <th>Cód insumo</th>
        <th>Insumos solicitados</th>
        <th>Cantidad</th>
        <th></th>
      </tr>
    </thead>
    <tbody class="quantity_supply_requests">
      <%= f.simple_fields_for :quantity_supply_requests do |form_quantity| %>
        <%= render "quantity_supply_request_fields", :f => form_quantity %>
      <% end %>
    </tbody>
  </table>
  <div class="links" id="links-quant-form">
    <%= link_to_add_association f, :quantity_supply_requests, class: 'btn btn-primary btn-sm',
    data: {"association-insertion-node" => "tbody.quantity_supply_requests", "association-insertion-method" => "append"} do %>
        <%= content_tag(:span, '', class: 'glyphicon glyphicon-plus') %>
    <% end %>
  </div>

  <!-- Insumos a dispensar -->
  <table class="table table-hover">
    <thead>
      <tr>
        <th>Cód insumo</th>
        <th>Insumos a entregar</th>
        <th>Cantidad</th>
        <th>Lote</th>
        <th>Expiración</th>
        <th></th>
      </tr>
    </thead>
    <tbody class="quantity_supply_lots">
      <%= f.simple_fields_for :quantity_supply_lots do |form_quantity| %>
        <%= render "quantity_supply_lot_fields", :f => form_quantity %>
      <% end %>
    </tbody>
  </table>
  <div class="links" id="links-quant-form">
    <%= link_to_add_association f, :quantity_supply_lots, class: 'btn btn-primary btn-sm',
    data: {"association-insertion-node" => "tbody.quantity_supply_lots", "association-insertion-method" => "append"} do %>
        <%= content_tag(:span, '', class: 'glyphicon glyphicon-plus') %>
    <% end %>
  </div>

  <div class='row'>
    <div class='col-md-6'>
      <%= f.input :observation, label: 'Observaciones', as: :text,
          :input_html => { :cols => 27  , :rows => 4 } %>
    </div>
    <div class='col-md-6'>
      <%= f.input :date_received, label: 'Fecha recibido',
                                  as: :string,
                                  :placeholder => "Seleccionar fecha",
                                  input_html: {class: "form-control", required: true, autocomplete: 'off',
                                  value: "#{@internal_order.date_received.strftime("%d/%m/%Y") unless @internal_order.new_record?}"},
                                  html5: false
                                  %><br><br>
    </div>
  </div>
<% end %>
