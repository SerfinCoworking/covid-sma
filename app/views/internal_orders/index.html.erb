<% content_for :page_header do %>
  Pedidos internos
  <small><%= content_tag(:span, '', class: 'glyphicon glyphicon-send') %> entregados</small>
  <%= link_to new_provider_internal_orders_path, class: 'btn btn-primary btn-xs' do %>
    <%= content_tag(:span, '', class: 'glyphicon glyphicon-plus') %>
    Entrega
  <% end %>
  <%= link_to applicant_index_internal_orders_path, class: 'btn btn-default btn-xs',
    title: 'Recibidos', data: { toggle: 'tooltip', placement: 'top' } do %>
    <%= content_tag(:span, '', class: 'glyphicon glyphicon-inbox') %>
    Recibidos
  <% end %>
<% end %>

<div class="panel panel-info" id="filter-panel">
  <div class="panel-leftheading">
    <%= content_tag(:span, '', class: 'glyphicon glyphicon-filter gi-2x') %>
  </div>
  <div class="panel-rightbody">
    <%= form_for_filterrific @filterrific do |f| %>
      <div class="col-md-2 col-sm-2">
        <label>Solicitante</label>
        <%# give the search field the 'filterrific-periodically-observed' class for live updates %>
        <%= f.text_field(
          :search_applicant,
          class: 'filterrific-periodically-observed form-control',
          placeholder: 'Sector',
          autocomplete: 'off'
        ) %>
      </div>
      <div class="col-md-1 col-sm-1">
        <label>Insumo</label>
        <%= f.text_field(
          :search_supply_code,
          class: 'filterrific-periodically-observed form-control',
          placeholder: 'CÃ³d'
        ) %>
      </div>
      <div class="col-md-2 col-sm-2">
        <label>Insumo</label>
        <%= f.text_field(
          :search_supply_name,
          class: 'filterrific-periodically-observed form-control',
          placeholder: 'Nombre'
        ) %>
      </div>
      <div class="col-md-2 col-sm-2">
        <label>Estado</label>
        <%= f.select(:with_status,
          @filterrific.select_options[:with_status].map {
            |status| [status.first, status.second, data: {'content': "<span class='label label-"+status.third+"'>"+status.first+"</span>"}]
          },{},
          { class: "selectpicker show-tick", "data-width"=>"135px"}) %>
      </div>
      <div class="col-md-2 col-sm-2">
        <label>Solicitado en</label>
        <%= f.text_field(:requested_date_at, class: 'form-control filterrific-periodically-observed datetimepicker',
          placeholder: "Una fecha", data: { date_format: 'DD/MM/YYYY'}) %>
      </div>
      <div class="col-md-2 col-sm-2">
        <label>Entregado en</label>
        <%= f.text_field(:requested_date_at, class: 'form-control filterrific-periodically-observed datetimepicker',
          placeholder: "Una fecha", data: { date_format: 'DD/MM/YYYY'}) %>
      </div>
      <%= link_to reset_filterrific_url, class: "btn btn-sm pull-right" do %>
        <%= content_tag(:span, '', class: 'glyphicon glyphicon-refresh') %>
      <% end %>
      <!-- Spinner para la carga -->
      <%= render_filterrific_spinner %>
    <% end %>
  </div>
  <div class="clearfix"> 
  </div>
</div>

<%= render(
  partial: 'internal_orders/list',
  locals: { internal_orders: @internal_orders }
) %>
