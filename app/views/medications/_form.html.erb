<%= simple_form_for @medication, remote: true, html: {class: "form-inline", onsubmit: "return validateForm()"} do |f| %>
  <%= f.error_notification %>
  <%= f.input :vademecum_id,
                    label: false,
                    label_method: :medication_name,
                    value_method: :id,
                    collection: @vademecums,
                    include_blank: false,
                    input_html: { class: 'chosen-select', id: 'vademecum_id',
                                  onchange: "enableQuantity();" },
                    prompt: 'Seleccionar una droga',
                    :disabled => @medication.persisted?
  %>
  <%= f.input :quantity, placeholder: 'Cantidad', required: false, disabled: true,
                          label: false, input_html: { "data-tooltip"=>true, :class=>"has-tip",
                          :title=>"Seleccione una droga", "data-placement"=>"right",
                          min: '0', step:'any', id: 'quantity-medication', :style => 'width: 100px' }%>

  <%= f.input :medication_brand_id,
                    label: false,
                    label_method: :name_and_lab,
                    value_method: :id,
                    collection: @medication_brands,
                    include_blank: false,
                    input_html: { class: 'chosen-select', id: 'medication_brand_id', onchange: "" },
                    prompt: 'Seleccione una marca o cree una nueva'
  %>
  <br><br>

  <%= f.hint 'No seleccione ninguna marca para crear una nueva', id: 'medication-brand-hint', style: "display: none" %>

  <%= f.simple_fields_for :medication_brand, html: { class: 'form-inline' } do |mb| %>
    <div id='form-medication-brand'>
      <label>Nueva marca</label>
      <%= mb.input :name, placeholder: 'Marca', required: true, label: false %>
      <%= mb.input :description, placeholder: 'Descripci贸n', required: false, label: false %>
      <%= mb.input :laboratory_id,
                        label: false,
                        label_method: :name,
                        value_method: :id,
                        collection: @laboratories,
                        include_blank: true,
                        input_html: { class: 'chosen-select', id: 'laboratory_id', onchange: "" },
                        prompt: 'Seleccione un laboratorio o cree uno nuevo'
      %>
      <br><br>
      <%= f.hint 'No seleccione ningun laboratorio para crear uno nuevo', id: 'laboratory-hint', style: "display: none" %>
      <div id='form-laboratory'>
        <label>Nuevo laboratorio</label>
        <%= mb.simple_fields_for :laboratory, html: { class: 'form-inline' } do |lab| %>
          <%= lab.input :name, placeholder: 'Nombre', label: false %>
          <%= lab.input :address, placeholder: 'Direcci贸n', required: false, label: false %>
        <% end %>
      </div>
    </div>
  <% end %><br>
  <%= f.input :date_received, label: 'Fecha recibida',
                            as: :string,
                            :placeholder => "Seleccione una fecha",
                            input_html: { class: "form-control", required: true, autocomplete: 'off' },
                            label: "Fecha recibida: ",
                            html5: false,
                            %>
  <%= f.input :expiry_date, label: 'Fecha expiraci贸n',
                            as: :string,
                            :placeholder => "Seleccione una fecha",
                            input_html: { class: "form-control", required: true, autocomplete: 'off' },
                            label: "Fecha expiraci贸n: ",
                            html5: false,
                            %>
  <br><br>
<% end %>
